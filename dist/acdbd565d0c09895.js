(function(){var e,n,t,r,o,i,u,s,l,c,f,a,y,p,h,k,d,g,_,m,v,b,w,q,x,O,E,K,D,T,A,C,M,P,S,z,L,W,j,V,X,Y,$,B,F,G,H,I,J=[].indexOf||function(e){for(var n=0,t=this.length;n<t;n++)if(n in this&&this[n]===e)return n;return-1},N={}.hasOwnProperty;for(n in X=[],B=[],F=null,T=[],t=[],L=!1,P="ctrl",z="meta alt option ctrl shift cmd".split(" "),H=[],l={keys:[],count:0},p=function(e,n){var t,r,o,i;if(e.filter)return e.filter(n);for(i=[],r=0,o=e.length;r<o;r++)n(t=e[r])&&i.push(t);return i},C=function(){return console.log.apply(console,arguments)},c=function(e,n){var t,r,o;if(e.length!==n.length)return!1;for(r=0,o=e.length;r<o;r++)if(t=e[r],!(0<=J.call(n,t)))return!1;return!0},f=function(e,n){var t,r,o;if(e.length!==n.length)return!1;for(t=r=0,o=e.length;0<=o?r<o:r>o;t=0<=o?++r:--r)if(e[t]!==n[t])return!1;return!0},w=function(e,n){var t,r,o;for(r=0,o=e.length;r<o;r++)if(t=e[r],0>J.call(n,t))return!1;return!0},q=function(e,n){var t,r,o,i;for(o=r=0,i=e.length;o<i;o++){if(t=e[o],!((t=n.indexOf(t))>=r))return!1;r=t}return!0},W=function(e,n){if((n||keypress.suppress_event_defaults)&&!keypress.force_event_defaults&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation))return e.stopPropagation()},i=function(e){return!e.prevent_repeat&&("function"==typeof e.on_keydown||void 0)},A=function(e){var n,t,r,o;for(t=0,r=(o=e.keys).length;t<r;t++)if(e=o[t],0<=J.call(T,e)){n=!0;break}return n},h=function(e,n,t){if("function"==typeof n["on_"+e]&&W(t,!1===n["on_"+e].call(n.this,t,n.count)),"release"===e&&(n.count=0),"keyup"===e)return n.keyup_fired=!0},M=function(e,n){var t,r,o;for(r=0,o=X.length;r<o;r++)((t=X[r]).is_ordered&&f(e,t.keys)||!t.is_ordered&&c(e,t.keys))&&n(t)},k=function(e,n){var t,r,o;for(r=0,o=X.length;r<o;r++)((t=X[r]).is_ordered&&q(t.keys,e)||!t.is_ordered&&w(t.keys,e))&&n(t)},s=function(e){return!(0<=J.call(T,"cmd")&&0>J.call(e,"cmd"))},d=function(e){var n,t;return n=[],(t=p(T,(function(n){return n!==e}))).push(e),M(t,(function(e){if(s(e.keys))return n.push(e)})),k(t,(function(e){if(!(0<=J.call(n,e))&&!e.is_solitary&&s(e.keys))return n.push(e)})),n},_=function(e){var n,t,r,o;for(t=[],r=0,o=X.length;r<o;r++)(n=X[r]).is_sequence||0<=J.call(n.keys,e)&&s(n.keys)&&t.push(n);return t},o=function(e){var n,r,o,i,u,s,l,c,f,a,y;if(s=!1,u=!0,o=!1,0<=J.call(t,e))return!0;if(t.length)for(i=l=0,a=t.length;0<=a?l<a:l>a;i=0<=a?++l:--l)if((n=t[i])&&n.is_exclusive&&e.is_exclusive){if(n=n.keys,!s)for(c=0,f=n.length;c<f;c++)if(r=n[c],s=!0,0>J.call(e.keys,r)){s=!1;break}if(u&&!s)for(c=0,f=(y=e.keys).length;c<f;c++)if(r=y[c],u=!1,0>J.call(n,r)){u=!0;break}s&&(o?$(t.splice(i,1)):($(t.splice(i,1,e)),o=!0),u=!1)}return u&&t.unshift(e),s||u},Y=function(e){var n,r,o;for(n=r=0,o=t.length;0<=o?r<o:r>o;n=0<=o?++r:--r)if(t[n]===e){$(t.splice(n,1));break}},$=function(e){if(e)return e.count=null,e.keyup_fired=null},r=function(e,n){var t,r,o,i;if(B.push(e),(r=g()).length){for(o=0,i=r.length;o<i;o++)t=r[o],W(n,t.prevent_default);F&&clearTimeout(F),-1<keypress.sequence_delay&&(F=setTimeout((function(){return B=[]}),keypress.sequence_delay))}else B=[]},g=function(){var e,n,t,r,o,i,u,s,l,c,f;for(r=[],i=0,l=X.length;i<l;i++)for(e=X[i],n=u=1,c=B.length;1<=c?u<=c:u>=c;n=1<=c?++u:--u)if(o=B.slice(-n),e.is_sequence){if(0>J.call(e.keys,"shift")&&(o=p(o,(function(e){return"shift"!==e})),!o.length))continue;for(n=s=0,f=o.length;0<=f?s<f:s>f;n=0<=f?++s:--s){if(e.keys[n]!==o[n]){t=!1;break}t=!0}t&&r.push(e)}return r},m=function(e){var n,t,r,o,i,u,s,l,c,f,a;for(u=0,c=X.length;u<c;u++)if((n=X[u]).is_sequence){for(t=s=1,f=B.length;1<=f?s<=f:s>=f;t=1<=f?++s:--s)if(i=p(B,(function(e){return 0<=J.call(n.keys,"shift")||"shift"!==e})).slice(-t),n.keys.length===i.length)for(t=l=0,a=i.length;0<=a?l<a:l>a;t=0<=a?++l:--l)if(o=i[t],!(0>J.call(n.keys,"shift")&&"shift"===o||"shift"===e&&0>J.call(n.keys,"shift"))){if(n.keys[t]!==o){r=!1;break}r=!0}if(r)return n}return!1},y=function(e,n){var t;return!!n.shiftKey&&null!=(t=D[e])&&t},v=function(e,n,t){return!(0>J.call(e.keys,n))&&(W(t,e&&e.prevent_default),!(0<=J.call(T,n)&&!i(e))&&(n=o(e),e.keyup_fired=!1,e.is_counting&&"function"==typeof e.on_keydown&&(e.count+=1),n?h("keydown",e,t):void 0))},x=function(e,n){var t,o,i,u;for(t in(o=y(e,n))&&(e=o),r(e,n),(o=m(e))&&h("keydown",o,n),S)n[o=S[t]]&&(t===e||0<=J.call(T,t)||T.push(t));for(t in S)if(o=S[t],t!==e&&0<=J.call(T,t)&&!n[o])for(o=i=0,u=T.length;0<=u?i<u:i>u;o=0<=u?++i:--i)T[o]===t&&T.splice(o,1);for(i=0,u=(o=d(e)).length;i<u;i++)t=o[i],v(t,e,n);if((o=_(e)).length)for(i=0,u=o.length;i<u;i++)t=o[i],W(n,t.prevent_default);0>J.call(T,e)&&T.push(e)},b=function(e,n,t){var r,o;o=A(e),e.keyup_fired||((r=T.slice()).push(t),e.is_solitary&&!c(r,e.keys))||(h("keyup",e,n),e.is_counting&&"function"==typeof e.on_keyup&&"function"!=typeof e.on_keydown&&(e.count+=1)),o||(h("release",e,n),Y(e))},O=function(e,n){var r,o,i,u,s,l;if(o=e,(i=y(e,n))&&(e=i),i=D[o],n.shiftKey?i&&0<=J.call(T,i)||(e=o):o&&0<=J.call(T,o)||(e=i),(u=m(e))&&h("keyup",u,n),0>J.call(T,e))return!1;for(u=s=0,l=T.length;0<=l?s<l:s>l;u=0<=l?++s:--s)if((r=T[u])===e||r===i||r===o){T.splice(u,1);break}for(o=t.length,i=[],u=0,s=t.length;u<s;u++)r=t[u],0<=J.call(r.keys,e)&&i.push(r);for(u=0,s=i.length;u<s;u++)r=i[u],b(r,n,e);if(1<o)for(o=0,u=t.length;o<u;o++)void 0===(r=t[o])||0<=J.call(i,r)||A(r)||Y(r)},V=function(e,n){var t;if(L)T.length&&(T=[]);else if((n||T.length)&&(t=a(e.keyCode)))return n?x(t,e):O(t,e)},G=function(e){var n,t,r,o;for(o=[],n=t=0,r=X.length;0<=r?t<r:t>r;n=0<=r?++t:--t){if(e===X[n]){X.splice(n,1);break}o.push(void 0)}return o},I=function(e){var n,t,r,o,i;for(e.keys.length||C("You're trying to bind a combo with no keys."),t=o=0,i=e.keys.length;0<=i?o<i:o>i;t=0<=i?++o:--o)r=e.keys[t],(n=E[r])&&(r=e.keys[t]=n),"meta"===r&&e.keys.splice(t,1,P),"cmd"===r&&C('Warning: use the "meta" key rather than "cmd" for Windows compatibility');for(n=0,o=(i=e.keys).length;n<o;n++)if(r=i[n],0>J.call(H,r))return C('Do not recognize the key "'+r+'"'),!1;if(0<=J.call(e.keys,"meta")||0<=J.call(e.keys,"cmd")){for(n=e.keys.slice(),o=0,i=z.length;o<i;o++)r=z[o],-1<(t=n.indexOf(r))&&n.splice(t,1);1<n.length&&C("META and CMD key combos cannot have more than 1 non-modifier keys",e,n)}return!0},u=function(e){var n;if(0<=J.call(T,"cmd")&&"cmd"!==(n=a(e.keyCode))&&"shift"!==n&&"alt"!==n&&"caps"!==n&&"tab"!==n)return V(e,!1)},window.keypress={},keypress.force_event_defaults=!1,keypress.suppress_event_defaults=!1,keypress.sequence_delay=800,keypress.get_registered_combos=function(){return X},keypress.reset=function(){X=[]},keypress.combo=function(e,n,t){return null==t&&(t=!1),keypress.register_combo({keys:e,on_keydown:n,prevent_default:t})},keypress.counting_combo=function(e,n,t){return null==t&&(t=!1),keypress.register_combo({keys:e,is_counting:!0,is_ordered:!0,on_keydown:n,prevent_default:t})},keypress.sequence_combo=function(e,n,t){return null==t&&(t=!1),keypress.register_combo({keys:e,on_keydown:n,is_sequence:!0,prevent_default:t})},keypress.register_combo=function(e){var n,t;for(n in"string"==typeof e.keys&&(e.keys=e.keys.split(" ")),l)N.call(l,n)&&(t=l[n],null==e[n]&&(e[n]=t));if(I(e))return X.push(e),!0},keypress.register_many=function(e){var n,t,r,o;for(o=[],t=0,r=e.length;t<r;t++)n=e[t],o.push(keypress.register_combo(n));return o},keypress.unregister_combo=function(e){var n,t,r;if(!e)return!1;if(e.keys)return G(e);for(r=[],n=0,t=X.length;n<t;n++)(e=X[n])&&(c(keys,e.keys)?r.push(G(e)):r.push(void 0));return r},keypress.unregister_many=function(e){var n,t,r,o;for(o=[],t=0,r=e.length;t<r;t++)n=e[t],o.push(keypress.unregister_combo(n));return o},keypress.listen=function(){return L=!1},keypress.stop_listening=function(){return L=!0},a=function(e){return K[e]},S={cmd:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"},E={escape:"esc",control:"ctrl",command:"cmd",break:"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"},D={"/":"?",".":">",",":"<","'":'"',";":":","[":"{","]":"}","\\":"|","`":"~","=":"+","-":"_",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")"},K={0:"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"cmd",57392:"ctrl",63289:"num"})e=K[n],H.push(e);for(n in D)e=D[n],H.push(e);-1!==navigator.userAgent.indexOf("Mac OS X")&&(P="cmd"),-1!==navigator.userAgent.indexOf("Opera")&&(K[17]="cmd"),(j=function(e){return(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():setTimeout((function(){return j(e)}),9)})((function(){var e;return(e=function(e,n,t){return e.addEventListener?e.addEventListener(n,t):e.attachEvent?e.attachEvent("on"+n,t):void 0})(document.body,"keydown",(function(e){return e=e||window.event,V(e,!0),u(e)})),e(document.body,"keyup",(function(e){return e=e||window.event,V(e,!1)})),e(window,"blur",(function(){var e,n,t;for(n=0,t=T.length;n<t;n++)e=T[n],O(e,{});return T=[],[]}))}))}).call(this);