function search(o,e){for(var t=0;t<o.length;t++)if(o[t][0]==e[0]&&o[t][1]==e[1])return!0;return!1}function floodFill(o,e,t,l){if(void 0!==o.blocks[e]&&void 0!==o.blocks[e][t])for(var s=o.blocks[e][t].color,i=-1;i<2;i++)for(var r=-1;r<2;r++)if(Math.abs(i)!=Math.abs(r)){var c=(e+i+o.sides)%o.sides,n=t+r;void 0!==o.blocks[c]&&void 0!==o.blocks[c][n]&&o.blocks[c][n].color==s&&!1===search(l,[c,n])&&0===o.blocks[c][n].deleted&&(l.push([c,n]),floodFill(o,c,n,l))}}function consolidateBlocks(o,e,t){var l=[],s=[],i=[];if(s.push([e,t]),floodFill(o,e,t,s),!(s.length<3)){var r;for(r=0;r<s.length;r++){var c=s[r];void 0!==c&&2==c.length&&(-1==l.indexOf(c[0])&&l.push(c[0]),o.blocks[c[0]][c[1]].deleted=1,i.push(o.blocks[c[0]][c[1]]))}var n=MainHex.ct;if(n-o.lastCombo<settings.comboTime){settings.comboTime=1/settings.creationSpeedModifier*(waveone.nextGen/16.666667)*3,o.comboMultiplier+=1,o.lastCombo=n;var a=findCenterOfBlocks(i);o.texts.push(new Text(a.x,a.y,"x "+o.comboMultiplier.toString(),"bold Q","#fff",fadeUpAndOut))}else settings.comboTime=240,o.lastCombo=n,o.comboMultiplier=1;var d=s.length*s.length*o.comboMultiplier;o.texts.push(new Text(o.x,o.y,"+ "+d.toString(),"bold Q ",i[0].color,fadeUpAndOut)),o.lastColorScored=i[0].color,score+=d,tgames.setScore(score)}}